<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Killer Game Host</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Host Panel</h1>

<div class="controls">
  <input id="playerName" placeholder="Enter player name">
  <button id="addPlayerBtn">Add Player</button>
  <button id="startGameBtn">Start Game</button>
  <button id="startVotingBtn">Start Voting</button>
  <button id="endGameBtn">End Game</button>
</div>

<h2>Players:</h2>
<ul id="playerList"></ul>
<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const playerListEl = document.getElementById("playerList");
const playerNameInput = document.getElementById("playerName");
const addPlayerBtn = document.getElementById("addPlayerBtn");
const startGameBtn = document.getElementById("startGameBtn");
const endGameBtn = document.getElementById("endGameBtn");
const startVotingBtn = document.getElementById("startVotingBtn");

let roles = {};

// Add player
addPlayerBtn.addEventListener("click", () => {
  const name = playerNameInput.value.trim();
  if (name) {
    socket.emit("addPlayer", name);
    playerNameInput.value = "";
  }
});

// Start game
startGameBtn.addEventListener("click", () => socket.emit("startGame"));

// End game
endGameBtn.addEventListener("click", () => socket.emit("endGame"));

// Voting
startVotingBtn.addEventListener("click", () => alert("Voting started!"));

// Update player list
socket.on("playerAdded", (name) => {
  const li = document.createElement("li");
  li.textContent = name;
  playerListEl.appendChild(li);
});

socket.on("gameStarted", (r) => {
  roles = r;
  alert("Game started! Roles assigned.");
});

socket.on("gameEnded", () => {
  roles = {};
  playerListEl.innerHTML = "";
  alert("Game ended!");
});

socket.on("playerDied", (name) => {
  const items = document.querySelectorAll("#playerList li");
  items.forEach(li => {
    if(li.textContent === name) li.style.textDecoration = "line-through";
  });
});
</script>
</body>
</html>